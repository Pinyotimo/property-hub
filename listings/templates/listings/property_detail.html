{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
  <h2>{{ property.title }}</h2>
  <p><strong>Location:</strong> {{ property.location }}</p>
  <p><strong>Price:</strong> ${{ property.price }}</p>
  <p><strong>Type:</strong> {{ property.get_property_type_display }}</p>
  <p><strong>Bedrooms:</strong> {{ property.bedrooms }}</p>
  <p><strong>Bathrooms:</strong> {{ property.bathrooms }}</p>
  <p><strong>Listed on:</strong> {{ property.listed_date }}</p>

  {% if property.image %}
    <img src="{{ property.image.url }}" class="img-fluid mt-3" alt="Property Image">
  {% endif %}

  {% if request.user.is_authenticated %}
    <div class="mt-3">
      {% if request.user != property.owner %}
        <a href="{% url 'send_message' property.pk %}" class="btn btn-outline-success btn-sm">Contact Owner</a>
        <a href="{% url 'view_messages' property.pk %}" class="btn btn-outline-info btn-sm">View Messages</a>
      {% endif %}

      {% if request.user == property.owner %}
        <a href="{% url 'property_choose_image' property.pk %}" class="btn btn-outline-secondary btn-sm">Choose Image</a>
        <a href="{% url 'property_update' property.pk %}" class="btn btn-outline-primary btn-sm">Edit</a>
        <a href="{% url 'view_messages' property.pk %}" class="btn btn-outline-info btn-sm">View Messages</a>
      {% endif %}

      {% if request.user == property.owner or request.user.is_superuser or request.user.is_staff %}
        <a href="{% url 'property_delete' property.pk %}" class="btn btn-danger btn-sm"
           onclick="return confirm('Are you sure you want to delete this property? This action cannot be undone.');">
           Delete
        </a>
      {% endif %}
    </div>
  {% endif %}

  <a href="{% url 'property_list' %}" class="btn btn-link mt-4">‚Üê Back to Listings</a>
</div>
{% endblock %}