{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="card">
    {% if property.image %}
      <img src="{{ property.image.url }}" class="card-img-top property-detail-image" alt="{{ property.title }}">
    {% endif %}
    <div class="card-body">
      <h3>{{ property.title }}</h3>
      <p><strong>Location:</strong> {{ property.location }}</p>
      <p><strong>Price:</strong> ${{ property.price|floatformat:2 }}</p>
      <p><strong>Bedrooms:</strong> {{ property.bedrooms }}</p>
      <p><strong>Bathrooms:</strong> {{ property.bathrooms }}</p>
      <p><strong>Type:</strong> {{ property.property_type }}</p>
      <p><strong>Listed:</strong> {{ property.listed_date }}</p>
      <p><strong>Owner:</strong> {{ property.owner.username }}</p>
      {% if request.user.is_authenticated %}
        <div class="mt-3">
          {% if request.user == property.owner %}
            <a href="{% url 'property_choose_image' property.pk %}" class="btn btn-outline-secondary btn-sm">Choose Image</a>
            <a href="{% url 'property_update' property.pk %}" class="btn btn-outline-primary btn-sm">Edit</a>
          {% endif %}
          {% if request.user == property.owner or request.user.is_superuser or request.user.is_staff %}
            <a href="{% url 'property_delete' property.pk %}" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this property? This action cannot be undone.');">Delete</a>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}